{"version":3,"sources":["../../src/pages/tutorial/tutorial.module.ts","../../src/serveices/business/tutorial-service.ts","../../src/pages/tutorial/tutorial.ts"],"names":[],"mappings":"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","file":"3.js","sourcesContent":["import {NgModule} from '@angular/core';\nimport {IonicPageModule} from 'ionic-angular';\nimport {TutorialPage} from './tutorial';\nimport {TranslateModule} from '@ngx-translate/core';\nimport {TutorialService} from '../../serveices/business/tutorial-service';\n\n@NgModule({\n  declarations: [\n    TutorialPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(TutorialPage),\n    TranslateModule.forChild()\n  ],\n  exports: [\n    TutorialPage\n  ],\n  providers: [\n    TutorialService\n  ]\n})\nexport class TutorialPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/tutorial/tutorial.module.ts","import {Slides} from 'ionic-angular';\nimport {Injectable} from '@angular/core';\nimport {Store} from '@ngrx/store';\nimport {TranslateService} from '@ngx-translate/core';\nimport {AddSlidesAction, ToggleSkipAction} from '../../actions/tutorial-action';\nimport {Observable} from 'rxjs/Observable';\nimport 'rxjs/add/observable/from';\nimport 'rxjs/add/operator/bufferCount';\nimport 'rxjs/add/operator/zip'\nimport 'rxjs/add/operator/reduce';\nimport 'rxjs/add/operator/last';\nimport 'rxjs/add/operator/mergeAll';\nimport {assign, concat, zipObject} from 'lodash';\nimport {Slide} from '../../interfaces/tutorial-interface';\nimport {State} from '../../reducers/tutorial-reducer';\nimport {Subscription} from 'rxjs/Subscription';\n\n@Injectable()\nexport class TutorialService {\n  constructor(\n    public store: Store<State>,\n    private translate: TranslateService\n  ) {\n\n  }\n\n  slideChange(slides: Slides) {\n    this.store.dispatch(new ToggleSkipAction(!slides.isEnd()));\n  }\n\n  resetSkipState(){\n    this.store.dispatch(new ToggleSkipAction(true));\n  }\n\n  getSlides(keys: string[], images: string[]): Subscription{\n    let translateResult = {};\n\n    this.translate.get(keys).subscribe(result => translateResult = result);\n\n    /**\n     *There is a bug of typescript when use spread operator instead of apply method. https://github.com/Microsoft/TypeScript/issues/4130\n     **/\n    return this.getKeyOfOverview(keys)\n      .zip(this.getValueOfOverview(translateResult, keys))\n      .map((ary: Array<Array<string>>, index: number) => assign({image: images[index]}, zipObject.apply(zipObject, ary)))\n      .reduce((acc: Slide[], obj: Slide) => concat(acc, obj), [])\n      .subscribe((value: Slide[]) => this.store.dispatch(new AddSlidesAction(value)));\n  }\n\n  private getKeyOfOverview(keys: string[]): Observable<string[]> {\n    return Observable\n      .from(keys)\n      .map(key => Observable.from(key.split('_')).last().map(item => item.toLowerCase()))\n      .mergeAll()\n      .bufferCount(2);\n  }\n\n  private getValueOfOverview(source: Object, keys: string[]): Observable<string[]> {\n    return Observable\n      .from(keys)\n      .map(key => source[key])\n      .bufferCount(2);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/serveices/business/tutorial-service.ts","import {Component, OnInit} from '@angular/core';\nimport {IonicPage, MenuController, NavController, Slides} from 'ionic-angular';\nimport {TutorialService} from '../../serveices/business/tutorial-service';\nimport {Observable} from 'rxjs/Observable';\nimport {Store} from '@ngrx/store';\nimport * as fromRoot from '../../reducers/index-reducer'\nimport {Subscription} from 'rxjs/Subscription';\n\n@IonicPage()\n@Component({\n  selector: 'page-tutorial',\n  templateUrl: 'tutorial.html'\n})\nexport class TutorialPage implements OnInit {\n  slides: Observable<object[]>;\n  showSkip: Observable<boolean>;\n  dir: Observable<string>;\n  slides$$: Subscription;\n\n  constructor(public navCtrl: NavController,\n              public menu: MenuController,\n              private tutorial: TutorialService,\n              public store: Store<fromRoot.AppState>) {\n  }\n\n  ngOnInit() {\n    const keys = ['TUTORIAL_SLIDE1_TITLE',\n      'TUTORIAL_SLIDE1_DESCRIPTION',\n      'TUTORIAL_SLIDE2_TITLE',\n      'TUTORIAL_SLIDE2_DESCRIPTION',\n      'TUTORIAL_SLIDE3_TITLE',\n      'TUTORIAL_SLIDE3_DESCRIPTION',\n      'TUTORIAL_SLIDE4_TITLE',\n      'TUTORIAL_SLIDE4_BUTTON'\n    ];\n    const address = ['assets/img/ica-slidebox-img-1.png', 'assets/img/ica-slidebox-img-2.png', 'assets/img/ica-slidebox-img-3.png', 'assets/img/ica-slidebox-img-4.png'];\n\n    this.slides$$ = this.tutorial.getSlides(keys, address);\n\n    this.slides = this.store.select(fromRoot.selectTutorialSlides);\n\n    this.showSkip = this.store.select(fromRoot.selectSkipState);\n\n    this.dir = this.store.select(fromRoot.selectPlatformDirection);\n  }\n\n  startApp() {\n    this.navCtrl.setRoot('WelcomePage', {}, {\n      animate: true,\n      direction: 'forward'\n    }).then(() => {\n      this.tutorial.resetSkipState();\n    });\n  }\n\n  onSlideChangeStart(slides: Slides) {\n    this.tutorial.slideChange(slides);\n  }\n\n  // noinspection JSUnusedGlobalSymbols\n  ionViewDidEnter() {\n    // the root left menu should be disabled on the tutorial page\n    this.menu.enable(false);\n  }\n\n  // noinspection JSUnusedGlobalSymbols\n  ionViewWillLeave() {\n    // enable the root left menu when leaving the tutorial page\n    this.menu.enable(true);\n    this.slides$$.unsubscribe();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/tutorial/tutorial.ts"],"sourceRoot":""}